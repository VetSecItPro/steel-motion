name: Smart E2E Tests

on:
  pull_request:
    branches: [main, develop]
  push:
    branches: [main]
  workflow_dispatch:

permissions:
  contents: read
  issues: write
  pull-requests: write

jobs:
  e2e:
    uses: VetSecItPro/e2e-intelligence/.github/workflows/smart-e2e-template.yml@main
    with:
      repo-name: steelmotion
      node-version: '20'
      base-url: 'http://localhost:3000'
    secrets:
      SUPABASE_URL: ${{ secrets.SUPABASE_URL }}
      SUPABASE_SERVICE_ROLE_KEY: ${{ secrets.SUPABASE_SERVICE_ROLE_KEY }}
      SANITY_PROJECT_ID: ${{ secrets.NEXT_PUBLIC_SANITY_PROJECT_ID }}
      SANITY_DATASET: ${{ secrets.NEXT_PUBLIC_SANITY_DATASET }}
      SANITY_API_TOKEN: ${{ secrets.SANITY_API_TOKEN }}
      E2E_TEST_PASSWORD: ${{ secrets.E2E_TEST_PASSWORD }}
